{
  "consumer": {
    "name": "UserAPIConsumer"
  },
  "interactions": [
    {
      "description": "a request to create a new user",
      "pending": false,
      "providerStates": [
        {
          "name": "an authenticated admin user and no conflicting email"
        }
      ],
      "request": {
        "body": {
          "content": {
            "age": 25,
            "email": "john@example.com",
            "name": "John Doe",
            "password": "password123",
            "role": "USER"
          },
          "contentType": "application/json",
          "encoded": false
        },
        "headers": {
          "Authorization": [
            "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.valid-token"
          ],
          "Content-Type": [
            "application/json"
          ]
        },
        "method": "POST",
        "path": "/users"
      },
      "response": {
        "body": {
          "content": {
            "age": 25,
            "created_at": "2026-02-10T12:00:00.000Z",
            "email": "john@example.com",
            "id": "550e8400-e29b-41d4-a716-446655440000",
            "name": "John Doe",
            "role": "USER",
            "updated_at": "2026-02-10T12:00:00.000Z"
          },
          "contentType": "application/json",
          "encoded": false
        },
        "headers": {
          "Content-Type": [
            "application/json; charset=utf-8"
          ]
        },
        "matchingRules": {
          "body": {
            "$.age": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "type"
                }
              ]
            },
            "$.created_at": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{3}Z$"
                }
              ]
            },
            "$.email": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "^[\\w.-]+@[\\w.-]+\\.\\w+$"
                }
              ]
            },
            "$.id": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$"
                }
              ]
            },
            "$.name": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "type"
                }
              ]
            },
            "$.role": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "^(USER|ADMIN)$"
                }
              ]
            },
            "$.updated_at": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{3}Z$"
                }
              ]
            }
          },
          "header": {
            "Content-Type": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "application/json.*"
                }
              ]
            }
          }
        },
        "status": 201
      },
      "type": "Synchronous/HTTP"
    },
    {
      "description": "a request to create a user under 18 years old",
      "pending": false,
      "providerStates": [
        {
          "name": "an authenticated admin user"
        }
      ],
      "request": {
        "body": {
          "content": {
            "age": 16,
            "email": "young@example.com",
            "name": "Young User",
            "password": "password123"
          },
          "contentType": "application/json",
          "encoded": false
        },
        "headers": {
          "Authorization": [
            "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.valid-token"
          ],
          "Content-Type": [
            "application/json"
          ]
        },
        "method": "POST",
        "path": "/users"
      },
      "response": {
        "body": {
          "content": {
            "message": "User must be at least 18 years old"
          },
          "contentType": "application/json",
          "encoded": false
        },
        "headers": {
          "Content-Type": [
            "application/json; charset=utf-8"
          ]
        },
        "matchingRules": {
          "body": {
            "$.message": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "type"
                }
              ]
            }
          },
          "header": {
            "Content-Type": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "application/json.*"
                }
              ]
            }
          }
        },
        "status": 400
      },
      "type": "Synchronous/HTTP"
    },
    {
      "description": "a request to create a user with insufficient permissions",
      "pending": false,
      "providerStates": [
        {
          "name": "an authenticated user with USER role"
        }
      ],
      "request": {
        "body": {
          "content": {
            "age": 25,
            "email": "john@example.com",
            "name": "John Doe",
            "password": "password123"
          },
          "contentType": "application/json",
          "encoded": false
        },
        "headers": {
          "Authorization": [
            "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.valid-token"
          ],
          "Content-Type": [
            "application/json"
          ]
        },
        "method": "POST",
        "path": "/users"
      },
      "response": {
        "body": {
          "content": {
            "message": "Insufficient permissions"
          },
          "contentType": "application/json",
          "encoded": false
        },
        "headers": {
          "Content-Type": [
            "application/json; charset=utf-8"
          ]
        },
        "matchingRules": {
          "body": {
            "$.message": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "type"
                }
              ]
            }
          },
          "header": {
            "Content-Type": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "application/json.*"
                }
              ]
            }
          }
        },
        "status": 403
      },
      "type": "Synchronous/HTTP"
    },
    {
      "description": "a request to create a user with short password",
      "pending": false,
      "providerStates": [
        {
          "name": "an authenticated admin user"
        }
      ],
      "request": {
        "body": {
          "content": {
            "age": 25,
            "email": "john@example.com",
            "name": "John Doe",
            "password": "short"
          },
          "contentType": "application/json",
          "encoded": false
        },
        "headers": {
          "Authorization": [
            "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.valid-token"
          ],
          "Content-Type": [
            "application/json"
          ]
        },
        "method": "POST",
        "path": "/users"
      },
      "response": {
        "body": {
          "content": {
            "message": "Password must be at least 8 characters long"
          },
          "contentType": "application/json",
          "encoded": false
        },
        "headers": {
          "Content-Type": [
            "application/json; charset=utf-8"
          ]
        },
        "matchingRules": {
          "body": {
            "$.message": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "type"
                }
              ]
            }
          },
          "header": {
            "Content-Type": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "application/json.*"
                }
              ]
            }
          }
        },
        "status": 400
      },
      "type": "Synchronous/HTTP"
    },
    {
      "description": "a request to create a user without authorization",
      "pending": false,
      "providerStates": [
        {
          "name": "no authentication provided"
        }
      ],
      "request": {
        "body": {
          "content": {
            "age": 25,
            "email": "john@example.com",
            "name": "John Doe",
            "password": "password123"
          },
          "contentType": "application/json",
          "encoded": false
        },
        "headers": {
          "Content-Type": [
            "application/json"
          ]
        },
        "method": "POST",
        "path": "/users"
      },
      "response": {
        "body": {
          "content": {
            "message": "Authorization header is required"
          },
          "contentType": "application/json",
          "encoded": false
        },
        "headers": {
          "Content-Type": [
            "application/json; charset=utf-8"
          ]
        },
        "matchingRules": {
          "body": {
            "$.message": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "type"
                }
              ]
            }
          },
          "header": {
            "Content-Type": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "application/json.*"
                }
              ]
            }
          }
        },
        "status": 401
      },
      "type": "Synchronous/HTTP"
    },
    {
      "description": "a request to create a user without required fields",
      "pending": false,
      "providerStates": [
        {
          "name": "an authenticated admin user"
        }
      ],
      "request": {
        "body": {
          "content": {
            "name": "John Doe"
          },
          "contentType": "application/json",
          "encoded": false
        },
        "headers": {
          "Authorization": [
            "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.valid-token"
          ],
          "Content-Type": [
            "application/json"
          ]
        },
        "method": "POST",
        "path": "/users"
      },
      "response": {
        "body": {
          "content": {
            "message": "Name, email, age and password are required"
          },
          "contentType": "application/json",
          "encoded": false
        },
        "headers": {
          "Content-Type": [
            "application/json; charset=utf-8"
          ]
        },
        "matchingRules": {
          "body": {
            "$.message": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "type"
                }
              ]
            }
          },
          "header": {
            "Content-Type": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "application/json.*"
                }
              ]
            }
          }
        },
        "status": 400
      },
      "type": "Synchronous/HTTP"
    },
    {
      "description": "a request to delete a non-existent user",
      "pending": false,
      "providerStates": [
        {
          "name": "an authenticated admin user and user does not exist"
        }
      ],
      "request": {
        "headers": {
          "Authorization": [
            "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.valid-token"
          ]
        },
        "method": "DELETE",
        "path": "/users/99999999-9999-9999-9999-999999999999"
      },
      "response": {
        "body": {
          "content": {
            "message": "User not found"
          },
          "contentType": "application/json",
          "encoded": false
        },
        "headers": {
          "Content-Type": [
            "application/json; charset=utf-8"
          ]
        },
        "matchingRules": {
          "body": {
            "$.message": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "type"
                }
              ]
            }
          },
          "header": {
            "Content-Type": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "application/json.*"
                }
              ]
            }
          }
        },
        "status": 404
      },
      "type": "Synchronous/HTTP"
    },
    {
      "description": "a request to delete a user with insufficient permissions",
      "pending": false,
      "providerStates": [
        {
          "name": "an authenticated user with USER role"
        }
      ],
      "request": {
        "headers": {
          "Authorization": [
            "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.valid-token"
          ]
        },
        "method": "DELETE",
        "path": "/users/550e8400-e29b-41d4-a716-446655440000"
      },
      "response": {
        "body": {
          "content": {
            "message": "Insufficient permissions"
          },
          "contentType": "application/json",
          "encoded": false
        },
        "headers": {
          "Content-Type": [
            "application/json; charset=utf-8"
          ]
        },
        "matchingRules": {
          "body": {
            "$.message": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "type"
                }
              ]
            }
          },
          "header": {
            "Content-Type": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "application/json.*"
                }
              ]
            }
          }
        },
        "status": 403
      },
      "type": "Synchronous/HTTP"
    },
    {
      "description": "a request to delete a user without authorization",
      "pending": false,
      "providerStates": [
        {
          "name": "no authentication provided"
        }
      ],
      "request": {
        "method": "DELETE",
        "path": "/users/550e8400-e29b-41d4-a716-446655440000"
      },
      "response": {
        "body": {
          "content": {
            "message": "Authorization header is required"
          },
          "contentType": "application/json",
          "encoded": false
        },
        "headers": {
          "Content-Type": [
            "application/json; charset=utf-8"
          ]
        },
        "matchingRules": {
          "body": {
            "$.message": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "type"
                }
              ]
            }
          },
          "header": {
            "Content-Type": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "application/json.*"
                }
              ]
            }
          }
        },
        "status": 401
      },
      "type": "Synchronous/HTTP"
    },
    {
      "description": "a request to delete an existing user",
      "pending": false,
      "providerStates": [
        {
          "name": "an authenticated admin user and user exists"
        }
      ],
      "request": {
        "headers": {
          "Authorization": [
            "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.valid-token"
          ]
        },
        "method": "DELETE",
        "path": "/users/550e8400-e29b-41d4-a716-446655440000"
      },
      "response": {
        "status": 204
      },
      "type": "Synchronous/HTTP"
    },
    {
      "description": "a request to get a non-existent user by ID",
      "pending": false,
      "providerStates": [
        {
          "name": "an authenticated admin user and user does not exist"
        }
      ],
      "request": {
        "headers": {
          "Authorization": [
            "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.valid-token"
          ]
        },
        "method": "GET",
        "path": "/users/99999999-9999-9999-9999-999999999999"
      },
      "response": {
        "body": {
          "content": {
            "message": "User not found"
          },
          "contentType": "application/json",
          "encoded": false
        },
        "headers": {
          "Content-Type": [
            "application/json; charset=utf-8"
          ]
        },
        "matchingRules": {
          "body": {
            "$.message": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "type"
                }
              ]
            }
          },
          "header": {
            "Content-Type": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "application/json.*"
                }
              ]
            }
          }
        },
        "status": 404
      },
      "type": "Synchronous/HTTP"
    },
    {
      "description": "a request to get a user by ID",
      "pending": false,
      "providerStates": [
        {
          "name": "an authenticated admin user and user exists"
        }
      ],
      "request": {
        "headers": {
          "Authorization": [
            "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.valid-token"
          ]
        },
        "method": "GET",
        "path": "/users/550e8400-e29b-41d4-a716-446655440000"
      },
      "response": {
        "body": {
          "content": {
            "age": 25,
            "created_at": "2026-02-10T12:00:00.000Z",
            "email": "john@example.com",
            "id": "550e8400-e29b-41d4-a716-446655440000",
            "name": "John Doe",
            "role": "USER",
            "updated_at": "2026-02-10T12:00:00.000Z"
          },
          "contentType": "application/json",
          "encoded": false
        },
        "headers": {
          "Content-Type": [
            "application/json; charset=utf-8"
          ]
        },
        "matchingRules": {
          "body": {
            "$.age": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "type"
                }
              ]
            },
            "$.created_at": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{3}Z$"
                }
              ]
            },
            "$.email": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "^[\\w.-]+@[\\w.-]+\\.\\w+$"
                }
              ]
            },
            "$.id": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$"
                }
              ]
            },
            "$.name": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "type"
                }
              ]
            },
            "$.role": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "^(USER|ADMIN)$"
                }
              ]
            },
            "$.updated_at": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{3}Z$"
                }
              ]
            }
          },
          "header": {
            "Content-Type": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "application/json.*"
                }
              ]
            }
          }
        },
        "status": 200
      },
      "type": "Synchronous/HTTP"
    },
    {
      "description": "a request to get a user by ID without authorization",
      "pending": false,
      "providerStates": [
        {
          "name": "no authentication provided"
        }
      ],
      "request": {
        "method": "GET",
        "path": "/users/550e8400-e29b-41d4-a716-446655440000"
      },
      "response": {
        "body": {
          "content": {
            "message": "Authorization header is required"
          },
          "contentType": "application/json",
          "encoded": false
        },
        "headers": {
          "Content-Type": [
            "application/json; charset=utf-8"
          ]
        },
        "matchingRules": {
          "body": {
            "$.message": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "type"
                }
              ]
            }
          },
          "header": {
            "Content-Type": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "application/json.*"
                }
              ]
            }
          }
        },
        "status": 401
      },
      "type": "Synchronous/HTTP"
    },
    {
      "description": "a request to get another user by ID with USER role",
      "pending": false,
      "providerStates": [
        {
          "name": "an authenticated user with USER role accessing another user"
        }
      ],
      "request": {
        "headers": {
          "Authorization": [
            "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.valid-token"
          ]
        },
        "method": "GET",
        "path": "/users/550e8400-e29b-41d4-a716-446655440000"
      },
      "response": {
        "body": {
          "content": {
            "message": "Insufficient permissions"
          },
          "contentType": "application/json",
          "encoded": false
        },
        "headers": {
          "Content-Type": [
            "application/json; charset=utf-8"
          ]
        },
        "matchingRules": {
          "body": {
            "$.message": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "type"
                }
              ]
            }
          },
          "header": {
            "Content-Type": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "application/json.*"
                }
              ]
            }
          }
        },
        "status": 403
      },
      "type": "Synchronous/HTTP"
    },
    {
      "description": "a request to list all users",
      "pending": false,
      "providerStates": [
        {
          "name": "an authenticated admin user and users exist"
        }
      ],
      "request": {
        "headers": {
          "Authorization": [
            "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.valid-token"
          ]
        },
        "method": "GET",
        "path": "/users"
      },
      "response": {
        "body": {
          "content": [
            {
              "age": 25,
              "created_at": "2026-02-10T12:00:00.000Z",
              "email": "john@example.com",
              "id": "550e8400-e29b-41d4-a716-446655440000",
              "name": "John Doe",
              "role": "USER",
              "updated_at": "2026-02-10T12:00:00.000Z"
            }
          ],
          "contentType": "application/json",
          "encoded": false
        },
        "headers": {
          "Content-Type": [
            "application/json; charset=utf-8"
          ]
        },
        "matchingRules": {
          "body": {
            "$": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "type",
                  "min": 1
                }
              ]
            },
            "$[*].age": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "type"
                }
              ]
            },
            "$[*].created_at": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{3}Z$"
                }
              ]
            },
            "$[*].email": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "^[\\w.-]+@[\\w.-]+\\.\\w+$"
                }
              ]
            },
            "$[*].id": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$"
                }
              ]
            },
            "$[*].name": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "type"
                }
              ]
            },
            "$[*].role": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "^(USER|ADMIN)$"
                }
              ]
            },
            "$[*].updated_at": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{3}Z$"
                }
              ]
            }
          },
          "header": {
            "Content-Type": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "application/json.*"
                }
              ]
            }
          }
        },
        "status": 200
      },
      "type": "Synchronous/HTTP"
    },
    {
      "description": "a request to list users without authorization",
      "pending": false,
      "providerStates": [
        {
          "name": "no authentication provided"
        }
      ],
      "request": {
        "method": "GET",
        "path": "/users"
      },
      "response": {
        "body": {
          "content": {
            "message": "Authorization header is required"
          },
          "contentType": "application/json",
          "encoded": false
        },
        "headers": {
          "Content-Type": [
            "application/json; charset=utf-8"
          ]
        },
        "matchingRules": {
          "body": {
            "$.message": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "type"
                }
              ]
            }
          },
          "header": {
            "Content-Type": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "application/json.*"
                }
              ]
            }
          }
        },
        "status": 401
      },
      "type": "Synchronous/HTTP"
    },
    {
      "description": "a request to update a non-existent user",
      "pending": false,
      "providerStates": [
        {
          "name": "an authenticated admin user and user does not exist"
        }
      ],
      "request": {
        "body": {
          "content": {
            "name": "Updated"
          },
          "contentType": "application/json",
          "encoded": false
        },
        "headers": {
          "Authorization": [
            "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.valid-token"
          ],
          "Content-Type": [
            "application/json"
          ]
        },
        "method": "PUT",
        "path": "/users/99999999-9999-9999-9999-999999999999"
      },
      "response": {
        "body": {
          "content": {
            "message": "User not found"
          },
          "contentType": "application/json",
          "encoded": false
        },
        "headers": {
          "Content-Type": [
            "application/json; charset=utf-8"
          ]
        },
        "matchingRules": {
          "body": {
            "$.message": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "type"
                }
              ]
            }
          },
          "header": {
            "Content-Type": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "application/json.*"
                }
              ]
            }
          }
        },
        "status": 404
      },
      "type": "Synchronous/HTTP"
    },
    {
      "description": "a request to update a user with age under 18",
      "pending": false,
      "providerStates": [
        {
          "name": "an authenticated admin user and user exists"
        }
      ],
      "request": {
        "body": {
          "content": {
            "age": 15
          },
          "contentType": "application/json",
          "encoded": false
        },
        "headers": {
          "Authorization": [
            "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.valid-token"
          ],
          "Content-Type": [
            "application/json"
          ]
        },
        "method": "PUT",
        "path": "/users/550e8400-e29b-41d4-a716-446655440000"
      },
      "response": {
        "body": {
          "content": {
            "message": "User must be at least 18 years old"
          },
          "contentType": "application/json",
          "encoded": false
        },
        "headers": {
          "Content-Type": [
            "application/json; charset=utf-8"
          ]
        },
        "matchingRules": {
          "body": {
            "$.message": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "type"
                }
              ]
            }
          },
          "header": {
            "Content-Type": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "application/json.*"
                }
              ]
            }
          }
        },
        "status": 400
      },
      "type": "Synchronous/HTTP"
    },
    {
      "description": "a request to update a user with duplicate email",
      "pending": false,
      "providerStates": [
        {
          "name": "an authenticated admin user and email already exists"
        }
      ],
      "request": {
        "body": {
          "content": {
            "email": "existing@example.com"
          },
          "contentType": "application/json",
          "encoded": false
        },
        "headers": {
          "Authorization": [
            "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.valid-token"
          ],
          "Content-Type": [
            "application/json"
          ]
        },
        "method": "PUT",
        "path": "/users/550e8400-e29b-41d4-a716-446655440000"
      },
      "response": {
        "body": {
          "content": {
            "message": "Email already in use"
          },
          "contentType": "application/json",
          "encoded": false
        },
        "headers": {
          "Content-Type": [
            "application/json; charset=utf-8"
          ]
        },
        "matchingRules": {
          "body": {
            "$.message": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "type"
                }
              ]
            }
          },
          "header": {
            "Content-Type": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "application/json.*"
                }
              ]
            }
          }
        },
        "status": 409
      },
      "type": "Synchronous/HTTP"
    },
    {
      "description": "a request to update a user with insufficient permissions",
      "pending": false,
      "providerStates": [
        {
          "name": "an authenticated user with USER role"
        }
      ],
      "request": {
        "body": {
          "content": {
            "name": "Updated"
          },
          "contentType": "application/json",
          "encoded": false
        },
        "headers": {
          "Authorization": [
            "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.valid-token"
          ],
          "Content-Type": [
            "application/json"
          ]
        },
        "method": "PUT",
        "path": "/users/550e8400-e29b-41d4-a716-446655440000"
      },
      "response": {
        "body": {
          "content": {
            "message": "Insufficient permissions"
          },
          "contentType": "application/json",
          "encoded": false
        },
        "headers": {
          "Content-Type": [
            "application/json; charset=utf-8"
          ]
        },
        "matchingRules": {
          "body": {
            "$.message": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "type"
                }
              ]
            }
          },
          "header": {
            "Content-Type": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "application/json.*"
                }
              ]
            }
          }
        },
        "status": 403
      },
      "type": "Synchronous/HTTP"
    },
    {
      "description": "a request to update a user with short password",
      "pending": false,
      "providerStates": [
        {
          "name": "an authenticated admin user and user exists"
        }
      ],
      "request": {
        "body": {
          "content": {
            "password": "short"
          },
          "contentType": "application/json",
          "encoded": false
        },
        "headers": {
          "Authorization": [
            "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.valid-token"
          ],
          "Content-Type": [
            "application/json"
          ]
        },
        "method": "PUT",
        "path": "/users/550e8400-e29b-41d4-a716-446655440000"
      },
      "response": {
        "body": {
          "content": {
            "message": "Password must be at least 8 characters long"
          },
          "contentType": "application/json",
          "encoded": false
        },
        "headers": {
          "Content-Type": [
            "application/json; charset=utf-8"
          ]
        },
        "matchingRules": {
          "body": {
            "$.message": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "type"
                }
              ]
            }
          },
          "header": {
            "Content-Type": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "application/json.*"
                }
              ]
            }
          }
        },
        "status": 400
      },
      "type": "Synchronous/HTTP"
    },
    {
      "description": "a request to update a user without authorization",
      "pending": false,
      "providerStates": [
        {
          "name": "no authentication provided"
        }
      ],
      "request": {
        "body": {
          "content": {
            "name": "Updated"
          },
          "contentType": "application/json",
          "encoded": false
        },
        "headers": {
          "Content-Type": [
            "application/json"
          ]
        },
        "method": "PUT",
        "path": "/users/550e8400-e29b-41d4-a716-446655440000"
      },
      "response": {
        "body": {
          "content": {
            "message": "Authorization header is required"
          },
          "contentType": "application/json",
          "encoded": false
        },
        "headers": {
          "Content-Type": [
            "application/json; charset=utf-8"
          ]
        },
        "matchingRules": {
          "body": {
            "$.message": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "type"
                }
              ]
            }
          },
          "header": {
            "Content-Type": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "application/json.*"
                }
              ]
            }
          }
        },
        "status": 401
      },
      "type": "Synchronous/HTTP"
    },
    {
      "description": "a request to update an existing user",
      "pending": false,
      "providerStates": [
        {
          "name": "an authenticated admin user and user exists"
        }
      ],
      "request": {
        "body": {
          "content": {
            "age": 26,
            "email": "john.updated@example.com",
            "name": "John Updated"
          },
          "contentType": "application/json",
          "encoded": false
        },
        "headers": {
          "Authorization": [
            "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.valid-token"
          ],
          "Content-Type": [
            "application/json"
          ]
        },
        "method": "PUT",
        "path": "/users/550e8400-e29b-41d4-a716-446655440000"
      },
      "response": {
        "body": {
          "content": {
            "age": 25,
            "created_at": "2026-02-10T12:00:00.000Z",
            "email": "john@example.com",
            "id": "550e8400-e29b-41d4-a716-446655440000",
            "name": "John Doe",
            "role": "USER",
            "updated_at": "2026-02-10T12:00:00.000Z"
          },
          "contentType": "application/json",
          "encoded": false
        },
        "headers": {
          "Content-Type": [
            "application/json; charset=utf-8"
          ]
        },
        "matchingRules": {
          "body": {
            "$.age": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "type"
                }
              ]
            },
            "$.created_at": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{3}Z$"
                }
              ]
            },
            "$.email": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "^[\\w.-]+@[\\w.-]+\\.\\w+$"
                }
              ]
            },
            "$.id": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$"
                }
              ]
            },
            "$.name": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "type"
                }
              ]
            },
            "$.role": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "^(USER|ADMIN)$"
                }
              ]
            },
            "$.updated_at": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{3}Z$"
                }
              ]
            }
          },
          "header": {
            "Content-Type": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "application/json.*"
                }
              ]
            }
          }
        },
        "status": 200
      },
      "type": "Synchronous/HTTP"
    }
  ],
  "metadata": {
    "pactRust": {
      "ffi": "0.4.28",
      "models": "1.3.5"
    },
    "pactSpecification": {
      "version": "4.0"
    }
  },
  "provider": {
    "name": "UsersAPI"
  }
}